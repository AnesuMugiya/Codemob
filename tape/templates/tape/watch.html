{% extends "core/base.html" %}
{% load static %}
{% block head_title %}Tape{% endblock %}

{% block content %}
<div class="stream-area">
   <div class="row">
   <div class="video-stream col-md-8">
   <video video controls class="video" id="video" preload="metadata">
   <source src="{{ tape.video.url }}" type='video/mp4' />
    </video>
    <div class="video-detail">
     <div class="video-content">
      <div class="video-p-wrapper anim" style="--delay: .1s">
       <div class="author-img__wrapper video-author video-p">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check">
         <path d="M20 6L9 17l-5-5" />
        </svg>
        <img class="author-img" src="{{ tape.user.profile.image.url }}" />
       </div>
       <div class="video-p-detail">
        <div class="video-p-name">{{ tape.user }}</div>
        <div class="video-p-sub">{{ tape.user.profile.followed_by.count }} supporters</div>
       </div>
       <div class="button-wrapper">
        <button class="like">
         <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path d="M21.435 2.582a1.933 1.933 0 00-1.93-.503L3.408 6.759a1.92 1.92 0 00-1.384 1.522c-.142.75.355 1.704 1.003 2.102l5.033 3.094a1.304 1.304 0 001.61-.194l5.763-5.799a.734.734 0 011.06 0c.29.292.29.765 0 1.067l-5.773 5.8c-.428.43-.508 1.1-.193 1.62l3.075 5.083c.36.604.98.946 1.66.946.08 0 .17 0 .251-.01.78-.1 1.4-.634 1.63-1.39l4.773-16.075c.21-.685.02-1.43-.48-1.943z" />
         </svg>
         Share
        </button>
        <button class="like red">
         <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M15.85 2.5c.63 0 1.26.09 1.86.29 3.69 1.2 5.02 5.25 3.91 8.79a12.728 12.728 0 01-3.01 4.81 38.456 38.456 0 01-6.33 4.96l-.25.15-.26-.16a38.093 38.093 0 01-6.37-4.96 12.933 12.933 0 01-3.01-4.8c-1.13-3.54.2-7.59 3.93-8.81.29-.1.59-.17.89-.21h.12c.28-.04.56-.06.84-.06h.11c.63.02 1.24.13 1.83.33h.06c.04.02.07.04.09.06.22.07.43.15.63.26l.38.17c.092.05.195.125.284.19.056.04.107.077.146.1l.05.03c.085.05.175.102.25.16a6.263 6.263 0 013.85-1.3zm2.66 7.2c.41-.01.76-.34.79-.76v-.12a3.3 3.3 0 00-2.11-3.16.8.8 0 00-1.01.5c-.14.42.08.88.5 1.03.64.24 1.07.87 1.07 1.57v.03a.86.86 0 00.19.62c.14.17.35.27.57.29z" />
         </svg>
         Liked
        </button>
       </div>
      </div>
      <div class="video-p-title anim" style="--delay: .2s">{{ tape.videodetail.title }}</div>
      <div class="video-p-subtitle anim" style="--delay: .3s">{{ tape.videodetail.description }}</div>
     </div>





     <!-- <form action="{%url 'like-video' tape.id%}" method="POST" class="like-form">
      {%csrf_token%}
      <button type="submit"  class="like-btn" name="video_id" value="{{tape.id}}">
          {%if user not in tape.likes.all %}
         <svg xmlns="http://www.w3.org/2000/svg" class=" mr-2 like-icon inline-block" viewBox="0 0 20 20" width="24" height="24" fill="currentColor">
             <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
         </svg>
         {%else%}
         <svg xmlns="http://www.w3.org/2000/svg" class=" mr-2 like-icon text-white inline-block" viewBox="0 0 20 20" width="24" height="24" fill="currentColor">
             <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
         </svg>

         {%endif%}
     </button>
     <span class="like-count" id="like-count">{{tape.num_likes}}</span>
  </form> -->

<!-- 
     <form action="{% url 'dislike-video' tape.id%}" method="POST" class="dislike-form">
      {% csrf_token %}
    <button type="submit" class="dislike-btn" name="video_id" value="{{tape.id}}">
        {%if user not in tape.dislikes.all%}
        <svg xmlns="http://www.w3.org/2000/svg" class=" mr-2 dislike-icon inline-block" viewBox="0 0 20 20" width="24" height="24" fill="currentColor">
            <path d="M18 9.5a1.5 1.5 0 11-3 0v-6a1.5 1.5 0 013 0v6zM14 9.667v-5.43a2 2 0 00-1.105-1.79l-.05-.025A4 4 0 0011.055 2H5.64a2 2 0 00-1.962 1.608l-1.2 6A2 2 0 004.44 12H8v4a2 2 0 002 2 1 1 0 001-1v-.667a4 4 0 01.8-2.4l1.4-1.866a4 4 0 00.8-2.4z" />
        </svg>
        {% else %}
        <svg xmlns="http://www.w3.org/2000/svg" class=" mr-2 dislike-icon text-white inline-block" viewBox="0 0 20 20" width="24" height="24" fill="currentColor">
            <path d="M18 9.5a1.5 1.5 0 11-3 0v-6a1.5 1.5 0 013 0v6zM14 9.667v-5.43a2 2 0 00-1.105-1.79l-.05-.025A4 4 0 0011.055 2H5.64a2 2 0 00-1.962 1.608l-1.2 6A2 2 0 004.44 12H8v4a2 2 0 002 2 1 1 0 001-1v-.667a4 4 0 01.8-2.4l1.4-1.866a4 4 0 00.8-2.4z" />
        </svg>
        {% endif %}
    </button> -->
    <span id="dislike-count">{{tape.num_dislikes}}</span>
  </form>

    </div>






    <div class="font-semibold capitalize text-2xl py-2">Comments {{tape.comments.count}}</div>
         <div class="bg-white p-2">
            <form action="{%url 'comment' tape.id %}" method="POST">
               {% csrf_token %}
               <textarea name="comment" rows="4" id="comment" class="form-control ml-1 shadow-none textarea"   placeholder="Add a comment .."></textarea>
               <div class="mt-2 text-right">
                  <button type="submit" class="btn btn-primary btn-sm shadow-none">Comment</button>
               </div>
            </form>
         
         </div>
      <div class="comment">
         {%for comment in tape.comments.all %} 




         <div class="bg-white p-2">
            <div class="d-flex flex-row user-info"><img class="rounded-circle" src="{{comment.user.profile.image.url}}" width="40" alt="profile pic">
                <div class="d-flex flex-column justify-content-start ml-2"><span class="d-block font-weight-bold name">{{comment.user.username}}</span><span class="date text-black-50">{{comment.created_at|timesince}} ago</span></div>
            </div>
            <div class="mt-2">
                <p class="comment-text">{{comment.comment}}</p>
            </div>
        </div>


      {%endfor%}

 
 </div>







   </div>
   
    <div class="chat-vid__container col-md-4">
     <div class="chat-vid__title anim" style="--delay: .3s">Related Videos</div>
     <div class="chat-vid anim" style="--delay: .4s">
      <div class="chat-vid__wrapper">
       <img class="chat-vid__img" src="{% static 'core\img\Stock\Thumbails\Thumbail3.jpg' %}" />
       <div class="chat-vid__content">
        <div class="chat-vid__name">Top Fashion Trends to Follow</div>
        <div class="chat-vid__by">Anovimba Chiwera</div>
        <div class="chat-vid__info">125.908 views <span class="seperate"></span>2 days ago</div>
       </div>
      </div>
     </div>
     <div class="chat-vid anim" style="--delay: .5s">
      <div class="chat-vid__wrapper">
       <img class="chat-vid__img" src="{% static 'core\img\Stock\Thumbails\Thumbnail4..jpg' %}" />
       <div class="chat-vid__content">
        <div class="chat-vid__name">How to become a Pro at PUBG</div>
        <div class="chat-vid__by">Nesy Black</div>
        <div class="chat-vid__info">125.908 views <span class="seperate"></span>2 days ago</div>
       </div>
      </div>
     </div>
     <div class="chat-vid__button anim" style="--delay: .6s">See All related videos (32)</div>
    </div>
   </div>
</div>
{%endblock%}

<!-- "controls": true, "aspectRatio":"16:9", "autoplay": true, "playbackRates": [1, 1.5, 2], "preload": "auto"  -->